# 线程

## 进程和线程
`进程的概念包括两个特点`
- 资源所有权: 一个进程包括一个存放进程映像的虚拟地址空间；进程映像是程序、数据、栈和进程控制块中定义的属性的集合。一个进程总是拥有对资源的控制或所有权，这些资源包括内存、I/O通道、I/O设备和文件等。操作系统提供包含功能，以防止进程之间发生不必要的与资源相关的冲突
- 调度/执行: 一个进程沿着可以通过一个或多个程序的执行路径执行，其执行过程可能与其他进程的执行过程交替进行。因此，一个进程具有一个执行状态(运行、就绪等)和被分配的优先级，它是一个可被操作系统调度和分派的实体

### 多线程
> `多线程`是指操作系统在单个进程内支持多个并发执行路径的能力。
> 每个进程只有一个线程在执行的传统方法(还没有明确线程的概念)被称为`单线程方法`

`在多线程环境中，进程被定义成资源分配的单位和一个被保护的单位。与进程相关联的有`
- 存放进程映像的虚拟地址空间
- 受保护地对处理器、其他进程(用于进程间通信)、文件和I/O资源(设备和通道)对访问
`在一个进程中，可能有一个或多个线程，每个线程有:`
    - 线程执行状态(运行、就绪等)
    - 在未运行时保存对线程上下文；从某种意义上看，线程可被视为进程内的一个独立操作的程序计数器
    - 一个执行栈
    - 用于每个线程局部变量的静态存储空间
    - 与进程内的其他线程共享的对进程对内存和资源对访问

`从性能比较可以看出线程对重要有点如下：`
- 在一个已有进程中创建一个新线程比创建一个全新进程所需对时间要少许多。
- 终止一个线程比终止一个进程花费对时间少
- 同一进程内线程间切换比进程间切换花费对时间少
- 线程提高了不同执行程序间通信对效率。在大多数操作系统中，独立进程间对通信需要内核对介入，以提供保护和通信所需对机制。但是，由于在同一个进程中对线程共享内存和文件，它们无需调用内核就可以互相通信


